<?php
namespace app;
use attr;
/** @var callable $§ */
?>
<section id="<?=$§('id');?>">
    <h1><?=$§('title');?></h1>
<?php if ($§('data')):?>
    <?php foreach ($§('data') as $data):?>
    <article>
        <?php foreach ($§('attr') as $attr):?>
            <?php if (!$html = attr\viewer($data, $attr)) continue;?>
            <?php if ($attr['id'] === 'name'):?>
                <?php if (allowed($data['_ent']['id'] . '/view')):?>
        <h1 data-attr="<?=$attr['id'];?>" data-type="<?=$attr['type'];?>">
            <a href="<?= $data['url'] ?? url($data['_ent']['id'] . '/view/' . $data['id']);?>"><?=$html;?></a>
        </h1>
                <?php else:?>
        <h1 data-attr="<?=$attr['id'];?>" data-type="<?=$attr['type'];?>"><?=$html;?></h1>
                <?php endif;?>
            <?php else:?>
        <div data-attr="<?=$attr['id'];?>" data-type="<?=$attr['type'];?>">
            <?=$html;?>
        </div>
            <?php endif;?>
        <?php endforeach;?>
    </article>
        <?php endforeach;?>
    <?= §('pager');?>
<?php else:?>
    <p><?= i18n('No entries found');?></p>
<?php endif;?>
</section>
