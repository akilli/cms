<?php
namespace app;
use attr;
use session;
/** @var callable $§ */
?>
<section id="<?=$§('id');?>" class="form" data-entity="<?=$§('entity')['id'];?>">
    <?php if ($§('title')):?>
    <h1><?=$§('title');?></h1>
    <?php endif;?>
    <form method="post"<?php if ($§('file')):?> enctype="multipart/form-data"<?php endif;?>>
        <fieldset>
            <?php foreach ($§('attr') as $attrId):?>
            <?php if (!($attr = $§('entity')['attr'][$attrId] ?? null)) continue;?>
            <div data-attr="<?=$attr['id'];?>" data-type="<?=$attr['type'];?>">
                <?=attr\frontend($attr, $§('data'));?>
            </div>
            <?php endforeach;?>
        </fieldset>
        <input type="submit" value="<?=i18n('Submit');?>" />
        <input type="hidden" name="token" value="<?=session\token();?>" />
    </form>
</section>
